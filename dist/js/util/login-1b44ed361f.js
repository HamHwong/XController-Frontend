"use strict";function formToSet(e){for(var o=(e=$(e)).serializeArray(),i={},n=0;n<o.length;n++){var t=o[n],s=t.name,a=t.value;i[s]=a}return i}function login(){var e=formToSet("#login_form"),o=e.username,i=e.password;switch(window.role){case"admin":case"Admin":(n=apiConfig.systemuser.Login(o,i))?(window.location.href="./admin-home.html",setCookie("auth","Admin"),setCookie("role",Enum.role.SYSADMIN),setCookie("name",n._accountname),setCookie("account",n._accountname),setCookie("uid",n._id),setCookie("user",JSON.stringify(n))):new MessageAlert("登陆失败，请检查用户名密码是否正确！",MessageAlert.Status.EXCEPTION);break;case"dealer":case"Dealer":(n=apiConfig.dealer.Login(o,i))?(window.location.href="./dealer-home.html",setCookie("auth","Dealer"),setCookie("role",Enum.role.DEALEAR),setCookie("name",n._accountname),setCookie("account",n._accountname),setCookie("uid",n._id),setCookie("user",JSON.stringify(n))):new MessageAlert("登陆失败，请检查用户名密码是否正确！",MessageAlert.Status.EXCEPTION);break;case"supplier":case"Supplier":(n=apiConfig.supplier.Login(o,i))?(window.location.href="./supplier-home.html",setCookie("auth","Supplier"),setCookie("role",Enum.role.SUPPLIER),setCookie("name",n._accountname),setCookie("account",n._accountname),setCookie("uid",n._id),setCookie("user",JSON.stringify(n))):new MessageAlert("登陆失败，请检查用户名密码是否正确！",MessageAlert.Status.EXCEPTION);break;case"zeiss":case"Zeiss":var n=apiConfig.employee.Login(o,i);console.log(n),n.statusField?new MessageAlert("登陆失败，请检查用户名密码是否正确！",MessageAlert.Status.EXCEPTION):(window.location.href="./zeiss-home.html",setCookie("auth","Zeiss"),setCookie("role",Enum.role.EMPLOYEE),setCookie("name",n.nameField),setCookie("account",n.accountField),setCookie("user",JSON.stringify(n)))}return!1}var e=function(e){return document.querySelector(e)},log=function(e){return console.log.bind(console)(e)};$("#role").on("change",function(e){window.role=$("#role").val()}),window.role=$("#role").val(),$("#login_form").on("keydown",function(e){13===e.which&&(console.log("Enter"),e.preventDefault(),login())});