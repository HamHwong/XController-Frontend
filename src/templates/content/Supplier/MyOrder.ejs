<div class="contentTitle clearfix">
  <h3>我的订单</h3>
  <div class="form-group pull-right col-xs-12 col-sm-6 col-md-4" id="tableQuery">
    <div class="form-group col-xs-9">
      <input type="text" class="form-control searchBox" name="search_box" id="search_box" placeholder="在这里输入关键字" />
    </div>
    <button type="submit" class="btn btn-primary col-xs-3 searchBtn">查询</button>
  </div>
</div>

<%-include('/components/contentTabs/tabSwitcher',{tabs:{applying:"处理中",success:"已完成"}})%>
  <div class="operation-menu">
  </div>
  <div class="table-content tab-content">
    <div class="tab-pane active" id="applying">
    </div>
    <div class="tab-pane" id="success">
    </div>
    <nav style="text-align: center">
      <ul class="pagination">
        <li><a href="#">&laquo;</a></li>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">5</a></li>
        <li><a href="#">&raquo;</a></li>
      </ul>
    </nav>
  </div>
  <%-include('/components/modal/modal',{type:"Supplier.Express.Detail"})%>
    <%-include('/components/table/table.init.ejs')%>
      <script>
        //载入我的订单的申请表操作
        var table_init = function() {
          // window.__PurchaseRequisitionItem_Unsave_set = {}
          //申请中table初始化
          var startRow = 0
          var endRow = 100
          var templateOpts = tableStructures.Supplier.MyOrder.Approving
          new table().loadFromTemplateJson(apiConfig.PRSupplierView.Paging(false, 0, 100), templateOpts).to("#applying")
          //successtable初始化
          var status = Enum.prstatus.Completed
          var templateOpts = tableStructures.Supplier.MyOrder.Success
          new table().loadFromTemplateJson(apiConfig.PRSupplierView.Paging(true, 0, 100), templateOpts).to("#success")

        }

        var supply = function(rid) {
          // console.log(rid);
          window._target = apiConfig.brochure.Get(rid)
          $("#Supply")
            .modal()
        }

        var search = function() {
          var keyword = filterXSS($("input#search_box").val().trim())
          if ("" == keyword) {
            table_init()
            return
          }
          var templateOpts = tableStructures.Supplier.MyOrder.Approving
          var result = apiConfig.PRSupplierView.Search(false, keyword, 0, 100)
          new table().loadFromTemplateJson(result, templateOpts).to("#applying")
          result = apiConfig.PRSupplierView.Search(true, keyword, 0, 100)
          templateOpts = tableStructures.Supplier.MyOrder.Success
          new table().loadFromTemplateJson(result, templateOpts).to("#success")
        }
      </script>
